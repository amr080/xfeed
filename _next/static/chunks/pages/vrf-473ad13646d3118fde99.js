(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{86034:function(e,n,r){"use strict";r.d(n,{Ug:function(){return p},Kq:function(){return f}});var t=r(69480),s=r(90063),i=r(84461),a=r(73808),c=r(24255),o=r(67294),u=r(16678),l="& > *:not(style) ~ *:not(style)";function d(){return(d=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var m=e=>o.createElement(t.m$.div,d({className:"chakra-stack__item"},e,{__css:d({display:"inline-block",flex:"0 0 auto",minWidth:0},e.__css)})),f=(0,s.G)(((e,n)=>{var{isInline:r,direction:s,align:a,justify:f,spacing:p="0.5rem",wrap:g,children:h,divider:x,className:v,shouldWrapChildren:b}=e,j=function(e,n){if(null==e)return{};var r,t,s={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(s[r]=e[r]);return s}(e,["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"]),y=r?"row":null!=s?s:"column",k=o.useMemo((()=>function(e){var{spacing:n,direction:r}=e,t={column:{marginTop:n,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:n},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:n,marginStart:0},"row-reverse":{marginTop:0,marginEnd:n,marginBottom:0,marginStart:0}};return{flexDirection:r,[l]:(0,u.XQ)(r,(e=>t[e]))}}({direction:y,spacing:p})),[y,p]),w=o.useMemo((()=>function(e){var{spacing:n,direction:r}=e,t={column:{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:n,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:n,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,u.XQ)(r,(e=>t[e]))}}({spacing:p,direction:y})),[p,y]),S=!!x,O=!b&&!S,E=(0,c.W)(h),N=O?E:E.map(((e,n)=>{var r=n+1===E.length,t=b?o.createElement(m,{key:n},e):e;if(!S)return t;var s=r?null:o.cloneElement(x,{__css:w});return o.createElement(o.Fragment,{key:n},t,s)})),_=(0,i.cx)("chakra-stack",v);return o.createElement(t.m$.div,d({ref:n,display:"flex",alignItems:a,justifyContent:f,flexDirection:k.flexDirection,flexWrap:g,className:_,__css:S?{}:{[l]:k[l]}},j),N)}));a.Ts&&(f.displayName="Stack");var p=(0,s.G)(((e,n)=>o.createElement(f,d({align:"center"},e,{direction:"row",ref:n}))));a.Ts&&(p.displayName="HStack");var g=(0,s.G)(((e,n)=>o.createElement(f,d({align:"center"},e,{direction:"column",ref:n}))));a.Ts&&(g.displayName="VStack")},30677:function(e,n,r){"use strict";r.d(n,{Ar:function(){return t.A},$0:function(){return o}});var t=r(82356),s=(r(124),r(96156)),i=r(85893),a=(r(67294),r(48017));function c(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}var o=function(e){return(0,i.jsx)(a.xu,function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?c(Object(r),!0).forEach((function(n){(0,s.Z)(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}({maxWidth:"container.sm",p:"8",mt:"8",bg:"gray.100"},e))}},63101:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return R}});var t=r(85893),s=r(67294),i=r(336),a=r(30677),c=r(87757),o=r.n(c),u=r(92137),l=r(27302),d=r(56185),m=r(86034),f=r(64115),p=r(90063),g=r(2326),h=r(55284),x=r(69480),v=r(84461),b=r(73808);function j(){return(j=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}var y=(0,p.G)(((e,n)=>{var r=(0,g.m)("Code",e),t=function(e,n){if(null==e)return{};var r,t,s={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(s[r]=e[r]);return s}((0,h.Lr)(e),["className"]);return s.createElement(x.m$.code,j({ref:n,className:(0,v.cx)("chakra-code",e.className)},t,{__css:j({display:"inline-block"},r)}))}));b.Ts&&(y.displayName="Code");var k=r(29583),w=r(99056),S=r(63533),O=r(26705);function E(){var e=(0,s.useState)(""),n=e[0],r=e[1],i=(0,S.c)(O.xo.RandomNumberConsumer),a=(0,k.j)(i,"getRandomNumber",{transactionName:"Randomness Request"}),c=a.send,p=a.state,g=(0,s.useCallback)((0,u.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:r("");case 3:case"end":return e.stop()}}),e)}))),[c]),h=(0,s.useCallback)((0,u.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.randomResult();case 2:n=e.sent,r(String(n));case 4:case"end":return e.stop()}}),e)}))),[i]);(0,s.useEffect)((function(){if(i)return i.on("FulfilledRandomness",h),function(){i.off("FulfilledRandomness",h)}}),[i,h]);var x="Mining"===p.status||"Success"===p.status&&!n,v="Exception"===p.status;return(0,t.jsxs)(t.Fragment,{children:[v&&(0,t.jsxs)(l.bZ,{status:"error",mb:"4",children:[(0,t.jsx)(l.zM,{}),(0,t.jsx)(l.Cd,{mr:2,children:"Error:"}),(0,t.jsx)(l.X,{children:p.errorMessage})]}),(0,t.jsx)(d.z,{onClick:g,isLoading:x,loadingText:(0,w.Yg)(p.status),colorScheme:"teal",children:"Request Randomness"}),n&&(0,t.jsxs)(m.Kq,{spacing:2,mt:4,children:[(0,t.jsx)(f.x,{fontSize:"xl",children:"Result"}),(0,t.jsx)(y,{size:"xs",colorScheme:"red",children:n})]})]})}var N=r(78482);function _(){var e=(0,s.useState)(!1),n=e[0],r=e[1],i=(0,s.useState)(!1),a=i[0],c=i[1],p=(0,s.useState)(),g=p[0],h=p[1],x=(0,s.useState)(),v=x[0],b=x[1],j=(0,S.c)(O.xo.RandomSvg),y=(0,k.j)(j,"create",{transactionName:"NFT Request"}),E=y.send,_=y.state,R=y.events,C=(0,k.j)(j,"finishMint",{transactionName:"NFT Mint Finish"}),T=C.send,M=C.state,W=C.events,F=(0,s.useCallback)((0,u.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:h(void 0),c(!1);case 4:case"end":return e.stop()}}),e)}))),[E]),P=(0,s.useCallback)((0,u.Z)(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.tokenURI(g);case 2:return n=e.sent,e.abrupt("return",(r=n,JSON.parse(atob(r.split(",")[1]))));case 4:case"end":return e.stop()}var r}),e)}))),[j,g]);(0,s.useEffect)((function(){if(R){var e=R.find((function(e){return"requestedRandomSVG"===e.name}));e&&h(e.args.tokenId)}}),[R]),(0,s.useEffect)((function(){j&&g&&j.on("CreatedUnfinishedRandomSVG",(function(e){g.eq(e)&&(c(!0),r(!0),j.removeAllListeners())}))}),[j,g]),(0,s.useEffect)((function(){W&&W.find((function(e){return"CreatedRandomSVG"===e.name}))&&P().then((function(e){b(e),r(!1)}))}),[W,P]);var q="Mining"===_.status||"Success"===_.status&&!a,z="Mining"===M.status||"Success"===M.status&&!v,L="Exception"===_.status||"Exception"===M.status,B=_.errorMessage||M.errorMessage;return(0,t.jsxs)(t.Fragment,{children:[L&&(0,t.jsxs)(l.bZ,{status:"error",mb:"4",children:[(0,t.jsx)(l.zM,{}),(0,t.jsx)(l.Cd,{mr:2,children:"Error:"}),(0,t.jsx)(l.X,{children:B})]}),!n&&(0,t.jsx)(d.z,{onClick:F,isLoading:q,loadingText:(0,w.Yg)(_.status),colorScheme:"teal",children:"Request NFT"}),n&&(0,t.jsx)(d.z,{onClick:function(){return T(g)},isLoading:z,loadingText:"Finishing Minting",colorScheme:"teal",children:"Finish Minting"}),v&&(0,t.jsxs)(m.Kq,{spacing:2,mt:4,children:[(0,t.jsx)(f.x,{fontSize:"xl",children:"Result"}),(0,t.jsx)(N.E,{src:v.image,alt:"Random SVG",boxSize:"360px",backgroundColor:"white",borderRadius:"lg",mt:"8"})]})]})}var R=function(){return(0,t.jsxs)(a.Ar,{children:[(0,t.jsx)(i.X,{as:"h1",mb:"8",children:"VRF"}),(0,t.jsx)(a.$0,{children:(0,t.jsx)(E,{})}),(0,t.jsx)(a.$0,{children:(0,t.jsx)(_,{})})]})}},75633:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vrf",function(){return r(63101)}])}},function(e){e.O(0,[774,238,227,888,179],(function(){return n=75633,e(e.s=n);var n}));var n=e.O();_N_E=n}]);