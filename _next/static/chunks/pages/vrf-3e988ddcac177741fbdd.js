(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{94624:function(e,t,n){"use strict";n.d(t,{Ug:function(){return p},Kq:function(){return m}});var r=n(51778),i=n(7969),s=n(71716),a=n(45311),c=n(84737),o=n(2784),l=n(52364),u="& > *:not(style) ~ *:not(style)";function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=e=>o.createElement(r.m$.div,d({className:"chakra-stack__item"},e,{__css:d({display:"inline-block",flex:"0 0 auto",minWidth:0},e.__css)})),m=(0,i.G)(((e,t)=>{var{isInline:n,direction:i,align:a,justify:m,spacing:p="0.5rem",wrap:h,children:x,divider:g,className:j,shouldWrapChildren:v}=e,b=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,["isInline","direction","align","justify","spacing","wrap","children","divider","className","shouldWrapChildren"]),y=n?"row":null!=i?i:"column",w=o.useMemo((()=>function(e){var{spacing:t,direction:n}=e,r={column:{marginTop:t,marginEnd:0,marginBottom:0,marginStart:0},row:{marginTop:0,marginEnd:0,marginBottom:0,marginStart:t},"column-reverse":{marginTop:0,marginEnd:0,marginBottom:t,marginStart:0},"row-reverse":{marginTop:0,marginEnd:t,marginBottom:0,marginStart:0}};return{flexDirection:n,[u]:(0,l.XQ)(n,(e=>r[e]))}}({direction:y,spacing:p})),[y,p]),k=o.useMemo((()=>function(e){var{spacing:t,direction:n}=e,r={column:{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:t,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:t,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":(0,l.XQ)(n,(e=>r[e]))}}({spacing:p,direction:y})),[p,y]),O=!!g,S=!v&&!O,C=(0,c.W)(x),E=S?C:C.map(((e,t)=>{var n=t+1===C.length,r=v?o.createElement(f,{key:t},e):e;if(!O)return r;var i=n?null:o.cloneElement(g,{__css:k});return o.createElement(o.Fragment,{key:t},r,i)})),N=(0,s.cx)("chakra-stack",j);return o.createElement(r.m$.div,d({ref:t,display:"flex",alignItems:a,justifyContent:m,flexDirection:w.flexDirection,flexWrap:h,className:N,__css:O?{}:{[u]:w[u]}},b),E)}));a.Ts&&(m.displayName="Stack");var p=(0,i.G)(((e,t)=>o.createElement(m,d({align:"center"},e,{direction:"row",ref:t}))));a.Ts&&(p.displayName="HStack");var h=(0,i.G)(((e,t)=>o.createElement(m,d({align:"center"},e,{direction:"column",ref:t}))));a.Ts&&(h.displayName="VStack")},42641:function(e,t,n){"use strict";n.d(t,{j:function(){return a}});var r=n(2784),i=n(22475),s=n(12753);function a(e,t,n){const{library:a,chainId:c}=(0,i.K)(),{promiseTransaction:o,state:l}=function(e,t){const[n,i]=(0,r.useState)({status:"None"}),{addTransaction:a}=(0,s.W)();return{promiseTransaction:(0,r.useCallback)((async n=>{var r,s,c,o,l;if(!e)return;let u;try{u=await n,i({transaction:u,status:"Mining",chainId:e}),a({transaction:Object.assign(Object.assign({},u),{chainId:e}),submittedAt:Date.now(),transactionName:null===t||void 0===t?void 0:t.transactionName});const r=await u.wait();return i({receipt:r,transaction:u,status:"Success",chainId:e}),r}catch(d){const t=null!==(l=null!==(c=null!==(s=null===(r=d.error)||void 0===r?void 0:r.message)&&void 0!==s?s:d.reason)&&void 0!==c?c:null===(o=d.data)||void 0===o?void 0:o.message)&&void 0!==l?l:d.message;return void i(u?{status:"Fail",transaction:u,receipt:d.receipt,errorMessage:t,chainId:e}:{status:"Exception",errorMessage:t,chainId:e})}}),[e,i,a,t]),state:n}}(c,n),[u,d]=(0,r.useState)(void 0);return{send:(0,r.useCallback)((async(...r)=>{const i=function(e,t,n){if(e.signer)return e;if(null===t||void 0===t?void 0:t.signer)return e.connect(t.signer);if(null===n||void 0===n?void 0:n.getSigner())return e.connect(n.getSigner());throw new TypeError("No signer available in contract, options or library")}(e,n,a),s=await o(i[t](...r));if(null===s||void 0===s?void 0:s.logs){const t=s.logs.filter((t=>t.address===e.address)).map((t=>e.interface.parseLog(t)));d(t)}}),[e,t,n,a]),state:l,events:u}}},72917:function(e,t,n){"use strict";n.d(t,{F:function(){return l}});var r=n(52322),i=n(77243),s=n(97729),a=n(5632);n(2784);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o="https://nextjs-ethereum-starter.vercel.app/",l=function(e){var t=e.customMeta,n=(0,a.useRouter)(),l=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({title:"Next.js Ethereum Starter",description:"Ethers.js - Hardhat - Next.js - Typescript",image:"".concat(o,"/images/site-preview.png"),type:"website"},t);return(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:l.title}),(0,r.jsx)("meta",{content:l.description,name:"description"}),(0,r.jsx)("meta",{property:"og:url",content:"".concat(o).concat(n.asPath)}),(0,r.jsx)("link",{rel:"canonical",href:"".concat(o).concat(n.asPath)}),(0,r.jsx)("meta",{property:"og:type",content:l.type}),(0,r.jsx)("meta",{property:"og:site_name",content:"Next.js Ethereum Starter"}),(0,r.jsx)("meta",{property:"og:description",content:l.description}),(0,r.jsx)("meta",{property:"og:title",content:l.title}),(0,r.jsx)("meta",{property:"og:image",content:l.image}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:site",content:"@hackbg"}),(0,r.jsx)("meta",{name:"twitter:title",content:l.title}),(0,r.jsx)("meta",{name:"twitter:description",content:l.description}),(0,r.jsx)("meta",{name:"twitter:image",content:l.image})]})}},610:function(e,t,n){"use strict";n.d(t,{A:function(){return W}});var r=n(52322),i=n(26101),s=n(50168),a=n(27592),c=n(90536),o=n(18605),l=n(89959),u=n(4648),d=n(97274),f=n(86581),m=n(22475),p=n(64570),h=n(68250),x=n.n(h),g=n(39097),j=(n(2784),n(19514)),v=n(11338),b=n(59768),y=n(37472);function w(){var e=(0,m.K)().account,t=(0,b.M)(e),n=t?y.dF(t):"";return(0,r.jsxs)(v.x,{children:[n," ETH"]})}var k=n(64042),O=n(37826),S="https://mainnet.infura.io/v3/84842078b09946638c03157f83405213",C="https://rinkeby.infura.io/v3/84842078b09946638c03157f83405213",E=new(n(63554).zw)({rpc:{1:S,4:C},qrcode:!0,pollingInterval:12e3});function N(){var e=(0,m.K)(),t=e.activate,n=e.activateBrowserWallet,i=(0,k.q)(),s=i.onOpen,a=i.isOpen,c=i.onClose;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.xu,{order:[-1,null,null,2],textAlign:["left",null,null,"right"],children:(0,r.jsx)(u.z,{colorScheme:"teal",variant:"outline",onClick:s,children:"Connect to a wallet"})}),(0,r.jsxs)(O.u_,{isOpen:a,onClose:c,children:[(0,r.jsx)(O.ZA,{}),(0,r.jsxs)(O.hz,{children:[(0,r.jsx)(O.xB,{children:"Connect to a wallet"}),(0,r.jsx)(O.ol,{}),(0,r.jsxs)(O.fe,{children:[(0,r.jsx)(u.z,{justifyContent:"space-between",width:"100%",mb:"4",size:"lg",variant:"outline",rightIcon:(0,r.jsx)(o.E,{maxWidth:"20px",src:"/images/logo-metamask.png",alt:"MetaMask"}),onClick:function(){n()},children:"MetaMask"}),(0,r.jsx)(u.z,{justifyContent:"space-between",width:"100%",mb:"4",size:"lg",variant:"outline",rightIcon:(0,r.jsx)(o.E,{maxWidth:"20px",src:"/images/logo-walletconnect.svg",alt:"WalletConnect"}),onClick:function(){t(E)},children:"WalletConnect"})]})]})]})]})}var M=n(72917),P={transactionStarted:"Started",transactionSucceed:"Completed"};function _(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:38;return e.replace(e.substring(6,t),"...")}var W=function(e){var t,n=e.children,h=e.customMeta,v=(0,m.K)(),b=v.account,y=v.deactivate,k=v.error,O=(0,p.z)().notifications;return t=x().create({seed:b}).toDataURL(),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.F,{customMeta:h}),(0,r.jsx)("header",{children:(0,r.jsx)(i.W,{maxWidth:"container.xl",children:(0,r.jsxs)(s.M,{columns:[1,1,1,2],alignItems:"center",justifyContent:"space-between",py:"8",children:[(0,r.jsxs)(a.k,{py:[4,null,null,0],children:[(0,r.jsx)(g.default,{href:"/",passHref:!0,children:(0,r.jsx)(c.r,{px:"4",py:"1",children:"Home"})}),(0,r.jsx)(g.default,{href:"/feeds",passHref:!0,children:(0,r.jsx)(c.r,{px:"4",py:"1",children:"Data Feeds"})}),(0,r.jsx)(g.default,{href:"/vrf",passHref:!0,children:(0,r.jsx)(c.r,{px:"4",py:"1",children:"VRF"})}),(0,r.jsx)(g.default,{href:"/external-api",passHref:!0,children:(0,r.jsx)(c.r,{px:"4",py:"1",children:"External API"})})]}),b?(0,r.jsxs)(a.k,{order:[-1,null,null,2],alignItems:"center",justifyContent:["flex-start",null,null,"flex-end"],children:[(0,r.jsx)(w,{}),(0,r.jsx)(o.E,{ml:"4",src:t,alt:"blockie"}),(0,r.jsxs)(l.v2,{placement:"bottom-end",children:[(0,r.jsx)(l.j2,{as:u.z,ml:"4",children:_(b)}),(0,r.jsx)(l.qy,{children:(0,r.jsx)(l.sN,{onClick:function(){y()},children:"Disconnect"})})]})]}):(0,r.jsx)(N,{})]})})}),(0,r.jsx)("main",{children:(0,r.jsxs)(i.W,{maxWidth:"container.xl",children:[k&&(0,r.jsxs)(d.bZ,{status:"error",mb:"8",children:[(0,r.jsx)(d.zM,{}),(0,r.jsx)(d.Cd,{mr:2,children:"Error:"}),(0,r.jsx)(d.X,{children:(0,j.e$)(k)})]}),n,O.map((function(e){return"walletConnected"===e.type?null:(0,r.jsxs)(d.bZ,{status:"success",position:"fixed",bottom:"8",right:"8",width:"400px",children:[(0,r.jsx)(d.zM,{}),(0,r.jsxs)(f.xu,{children:[(0,r.jsxs)(d.Cd,{children:[e.transactionName," ",P[e.type]]}),(0,r.jsxs)(d.X,{overflow:"hidden",children:["Transaction Hash:"," ",_(e.transaction.hash,61)]})]})]},e.id)}))]})}),(0,r.jsx)("footer",{children:(0,r.jsx)(i.W,{mt:"8",py:"8",maxWidth:"container.xl",children:(0,r.jsx)(c.r,{href:"https://github.com/hackbg",children:"GitHub"})})})]})}},24564:function(e,t,n){"use strict";n.d(t,{Ar:function(){return r.A},$0:function(){return o}});var r=n(610),i=(n(72917),n(77243)),s=n(52322),a=(n(2784),n(86581));function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var o=function(e){return(0,s.jsx)(a.xu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({maxWidth:"container.sm",p:"8",mt:"8",bg:"gray.100"},e))}},28135:function(e,t,n){"use strict";n.d(t,{c:function(){return c}});var r=n(22475),i=n(77785),s=n(2784),a=n(37635);function c(e){var t=(0,r.K)(),n=t.library,c=t.chainId,o=c&&a.Pl[c][e];return(0,s.useMemo)((function(){return n&&o.address?new i.CH(o.address,o.abi,n.getSigner()):null}),[o,n])}},19514:function(e,t,n){"use strict";n.d(t,{e$:function(){return c},jl:function(){return l},gC:function(){return d},Yg:function(){return f}});var r=n(43210),i=n(40187),s=n(75135),a=n(63554);function c(e){return e instanceof s.A5?"No Ethereum browser extension detected, install MetaMask on desktop or visit from a dApp browser on mobile.":e instanceof i.Uu?"You're connected to an unsupported network.":e instanceof s.ab||e instanceof a.ab?"Please authorize this website to access your Ethereum account.":(console.error(e),"An unknown error occurred. Check the console for more details.")}var o=new r.F("Bitcoin","BTC",8,{fixedPrecisionDigits:2,useFixedPrecision:!0}),l=function(e){return o.format(e.toString())},u=new r.W6("United States Dollar","USD",8,{fixedPrecisionDigits:2}),d=function(e){return u.format(e.toString())},f=function(e){return"Mining"===e?"Mining Request":"Success"===e&&"Fulfilling Request"}},55366:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(52322),i=n(2784),s=n(17674),a=n(24564),c=n(92847),o=n.n(c),l=n(76588),u=n(97274),d=n(4648),f=n(94624),m=n(11338),p=n(7969),h=n(33200),x=n(57052),g=n(51778),j=n(71716),v=n(45311);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var y=(0,p.G)(((e,t)=>{var n=(0,h.m)("Code",e),r=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}((0,x.Lr)(e),["className"]);return i.createElement(g.m$.code,b({ref:t,className:(0,j.cx)("chakra-code",e.className)},r,{__css:b({display:"inline-block"},n)}))}));v.Ts&&(y.displayName="Code");var w=n(42641),k=n(19514),O=n(28135),S=n(37635);function C(){var e=(0,i.useState)(""),t=e[0],n=e[1],s=(0,O.c)(S.xo.RandomNumberConsumer),a=(0,w.j)(s,"getRandomNumber",{transactionName:"Randomness Request"}),c=a.send,p=a.state,h=(0,i.useCallback)((0,l.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:n("");case 3:case"end":return e.stop()}}),e)}))),[c]),x=(0,i.useCallback)((0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.randomResult();case 2:t=e.sent,n(String(t));case 4:case"end":return e.stop()}}),e)}))),[s]);(0,i.useEffect)((function(){if(s)return s.on("FulfilledRandomness",x),function(){s.off("FulfilledRandomness",x)}}),[s,x]);var g="Mining"===p.status||"Success"===p.status&&!t,j="Exception"===p.status;return(0,r.jsxs)(r.Fragment,{children:[j&&(0,r.jsxs)(u.bZ,{status:"error",mb:"4",children:[(0,r.jsx)(u.zM,{}),(0,r.jsx)(u.Cd,{mr:2,children:"Error:"}),(0,r.jsx)(u.X,{children:p.errorMessage})]}),(0,r.jsx)(d.z,{onClick:h,isLoading:g,loadingText:(0,k.Yg)(p.status),colorScheme:"teal",children:"Request Randomness"}),t&&(0,r.jsxs)(f.Kq,{spacing:2,mt:4,children:[(0,r.jsx)(m.x,{fontSize:"xl",children:"Result"}),(0,r.jsx)(y,{size:"xs",colorScheme:"red",children:t})]})]})}var E=n(18605);function N(){var e=(0,i.useState)(!1),t=e[0],n=e[1],s=(0,i.useState)(!1),a=s[0],c=s[1],p=(0,i.useState)(),h=p[0],x=p[1],g=(0,i.useState)(),j=g[0],v=g[1],b=(0,O.c)(S.xo.RandomSvg),y=(0,w.j)(b,"create",{transactionName:"NFT Request"}),C=y.send,N=y.state,M=y.events,P=(0,w.j)(b,"finishMint",{transactionName:"NFT Mint Finish"}),_=P.send,W=P.state,R=P.events,T=(0,i.useCallback)((0,l.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:x(void 0),c(!1);case 4:case"end":return e.stop()}}),e)}))),[C]),F=(0,i.useCallback)((0,l.Z)(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.tokenURI(h);case 2:return t=e.sent,e.abrupt("return",(n=t,JSON.parse(atob(n.split(",")[1]))));case 4:case"end":return e.stop()}var n}),e)}))),[b,h]);(0,i.useEffect)((function(){if(M){var e=M.find((function(e){return"requestedRandomSVG"===e.name}));e&&x(e.args.tokenId)}}),[M]),(0,i.useEffect)((function(){b&&h&&b.on("CreatedUnfinishedRandomSVG",(function(e){h.eq(e)&&(c(!0),n(!0),b.removeAllListeners())}))}),[b,h]),(0,i.useEffect)((function(){R&&R.find((function(e){return"CreatedRandomSVG"===e.name}))&&F().then((function(e){v(e),n(!1)}))}),[R,F]);var z="Mining"===N.status||"Success"===N.status&&!a,D="Mining"===W.status||"Success"===W.status&&!j,I="Exception"===N.status||"Exception"===W.status,q=N.errorMessage||W.errorMessage;return(0,r.jsxs)(r.Fragment,{children:[I&&(0,r.jsxs)(u.bZ,{status:"error",mb:"4",children:[(0,r.jsx)(u.zM,{}),(0,r.jsx)(u.Cd,{mr:2,children:"Error:"}),(0,r.jsx)(u.X,{children:q})]}),!t&&(0,r.jsx)(d.z,{onClick:T,isLoading:z,loadingText:(0,k.Yg)(N.status),colorScheme:"teal",children:"Request NFT"}),t&&(0,r.jsx)(d.z,{onClick:function(){return _(h)},isLoading:D,loadingText:"Finishing Minting",colorScheme:"teal",children:"Finish Minting"}),j&&(0,r.jsxs)(f.Kq,{spacing:2,mt:4,children:[(0,r.jsx)(m.x,{fontSize:"xl",children:"Result"}),(0,r.jsx)(E.E,{src:j.image,alt:"Random SVG",boxSize:"360px",backgroundColor:"white",borderRadius:"lg",mt:"8"})]})]})}var M=function(){return(0,r.jsxs)(a.Ar,{children:[(0,r.jsx)(s.X,{as:"h1",mb:"8",children:"VRF"}),(0,r.jsx)(a.$0,{children:(0,r.jsx)(C,{})}),(0,r.jsx)(a.$0,{children:(0,r.jsx)(N,{})})]})}},58329:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vrf",function(){return n(55366)}])}},function(e){e.O(0,[774,814,346,888,179],(function(){return t=58329,e(e.s=t);var t}));var t=e.O();_N_E=t}]);