(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[644],{3473:function(e,n,t){"use strict";t.d(n,{c:function(){return c}});var s=t(7295),r=t(4146),a=t(7294),i=t(9680);function c(e){var n=(0,s.K)().library,t=(0,i.X)(e);return(0,a.useMemo)((function(){return n&&null!==t&&void 0!==t&&t.address?new r.CH(t.address,t.abi,n.getSigner()):null}),[t,n])}},9680:function(e,n,t){"use strict";t.d(n,{X:function(){return a}});var s=t(7295),r=t(5829);function a(e){var n,t,a=(0,s.K)().chainId;return a&&r[a]&&(null===(n=Object.values(r[a]).find((function(e){return e.chainId===String(a)})))||void 0===n||null===(t=n.contracts)||void 0===t?void 0:t[e])}},3169:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return k}});var s=t(7294),r=t(8527),a=t(9876),i=t(9416),c=t(29),o=t(7794),u=t.n(o),d=t(5193),l=t(7295),f=t(6698),h=t(1530),m=t(3473),x=t(325),p=t(5893);function v(){var e=(0,l.K)(),n=e.account,t=e.error,a=(0,s.useState)(""),i=a[0],o=a[1],v=(0,s.useState)(""),g=v[0],j=v[1],S=(0,m.c)("RandomNumberConsumer"),R=(0,f.j)(S,"getRandomNumber",{transactionName:"Randomness Request"}),b=R.send,w=R.state,k=R.events,E=function(){var e=(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:j("");case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),F=(0,s.useCallback)((0,c.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.randomResult();case 2:n=e.sent,j(String(n));case 4:case"end":return e.stop()}}),e)}))),[S]);(0,s.useEffect)((function(){if(k){var e=k.find((function(e){return"RequestedRandomness"===e.name}));e&&o(e.args.requestId)}}),[k]),(0,s.useEffect)((function(){S&&i&&S.on("FulfilledRandomness",(function(e){i===e&&(F(),S.removeAllListeners())}))}),[S,i,F]);var N="Mining"===w.status||"Success"===w.status&&!g,q="Exception"===w.status;return(0,p.jsxs)(p.Fragment,{children:[q&&(0,p.jsx)(x.j,{message:(0,h.Sx)(w.errorMessage)}),(0,p.jsx)(d.zx,{onClick:E,isLoading:N,loadingText:(0,h.Yg)(w.status),colorScheme:"teal",disabled:N||!n||!!t,children:"Request Randomness"}),g&&(0,p.jsxs)(r.Kq,{spacing:2,mt:4,children:[(0,p.jsx)(r.xv,{fontSize:"xl",children:"Result"}),(0,p.jsx)(r.EK,{size:"xs",colorScheme:"red",children:g})]})]})}var g=t(7398),j=t(4651),S=t(9680),R=t(6313);function b(e){var n=e.tokenId,t=(0,l.K)().chainId,s=(0,S.X)("RandomSVG"),i=t===R.dC,c=i?"".concat(R.v1,"/assets/").concat(s.address,"/").concat(n):void 0;return(0,p.jsxs)(r.Ug,{children:[(0,p.jsxs)(r.rU,{href:c,isExternal:!0,children:["See on OpenSea Testnet Marketplace ",(0,p.jsx)(a.h0,{mx:"2px"})]}),!i&&(0,p.jsx)(r.Ct,{children:"Rinkeby Only"})]})}function w(){var e=(0,l.K)(),n=e.account,t=e.error,a=(0,s.useState)(!1),i=a[0],o=a[1],v=(0,s.useState)(!1),S=v[0],R=v[1],w=(0,s.useState)(),k=w[0],E=w[1],F=(0,s.useState)(),N=F[0],q=F[1],C=(0,m.c)("RandomSVG"),M=(0,f.j)(C,"create",{transactionName:"NFT Request"}),V=M.send,T=M.state,y=M.events,_=(0,f.j)(C,"finishMint",{transactionName:"NFT Mint Finish"}),z=_.send,G=_.state,I=_.events,K=function(){var e=(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V();case 2:E(void 0),R(!1);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U=(0,s.useCallback)((0,c.Z)(u().mark((function e(){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.tokenURI(k);case 2:return n=e.sent,e.abrupt("return",(t=n,JSON.parse(atob(t.split(",")[1]))));case 4:case"end":return e.stop()}var t}),e)}))),[C,k]);(0,s.useEffect)((function(){if(y){var e=y.find((function(e){return"requestedRandomSVG"===e.name}));e&&E(e.args.tokenId)}}),[y]),(0,s.useEffect)((function(){C&&k&&C.on("CreatedUnfinishedRandomSVG",(function(e){k.eq(e)&&(R(!0),o(!0),C.removeAllListeners())}))}),[C,k]),(0,s.useEffect)((function(){I&&I.find((function(e){return"CreatedRandomSVG"===e.name}))&&U().then((function(e){q(e),o(!1)}))}),[I,U]);var L="Mining"===T.status||"Success"===T.status&&!S,O="Mining"===G.status||"Success"===G.status&&!N,X="Exception"===T.status||"Exception"===G.status,A=T.errorMessage||G.errorMessage;return(0,p.jsxs)(p.Fragment,{children:[X&&(0,p.jsx)(x.j,{message:(0,h.Sx)(A)}),!i&&(0,p.jsx)(g.u,{label:"Request random number and mint new NFT associated with the result",placement:"right-start",fontSize:"xs",hasArrow:!0,children:(0,p.jsx)(d.zx,{onClick:K,isLoading:L,loadingText:(0,h.Yg)(T.status),colorScheme:"teal",disabled:L||!n||!!t,children:N?"Request New NFT":"Request NFT"})}),i&&(0,p.jsx)(g.u,{label:"Use the random number from first step to generate unique SVG and store it as on-chain NFT metadata",placement:"right-start",fontSize:"xs",defaultIsOpen:!0,hasArrow:!0,children:(0,p.jsx)(d.zx,{onClick:function(){return z(k)},isLoading:O,loadingText:"Finishing Minting",colorScheme:"teal",disabled:O||!n,children:"Finish Minting"})}),N&&(0,p.jsxs)(r.Kq,{spacing:2,mt:4,children:[(0,p.jsx)(r.xv,{fontSize:"xl",children:"Result"}),(0,p.jsx)(j.Ee,{src:N.image,alt:"Random SVG",boxSize:"360px",backgroundColor:"white",borderRadius:"lg",mt:"8"}),(0,p.jsx)(b,{tokenId:k})]})]})}var k=function(){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.X6,{as:"h1",mb:"4",children:"Randomness"}),(0,p.jsx)(r.xv,{fontSize:"xl",children:"Use VRF (Verifiable Random Function) to consume randomness in your smart contracts."}),(0,p.jsxs)(i.$0,{children:[(0,p.jsx)(v,{}),(0,p.jsx)(r.xv,{my:"4",children:"With every new request for randomness, Chainlink VRF generates a random number and cryptographic proof of how that number was determined. VRF enables smart contracts to access randomness without compromising on security or usability."}),(0,p.jsxs)(r.rU,{href:"https://docs.chain.link/docs/get-a-random-number",isExternal:!0,children:["Learn More ",(0,p.jsx)(a.h0,{mx:"2px"})]})]}),(0,p.jsxs)(i.$0,{children:[(0,p.jsx)(w,{}),(0,p.jsx)(r.xv,{my:"4",children:"100% on-chain generated NFT using VRF as randomness source. Each request creates and stores an unique Scalable Vector Graphic (SVG)."}),(0,p.jsxs)(r.rU,{href:"https://chain.link/education/nfts",isExternal:!0,children:["Learn More ",(0,p.jsx)(a.h0,{mx:"2px"})]})]})]})}},9602:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vrf",function(){return t(3169)}])}},function(e){e.O(0,[876,806,774,888,179],(function(){return n=9602,e(e.s=n);var n}));var n=e.O();_N_E=n}]);